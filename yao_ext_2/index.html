<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chrome Extension</title>
  <link rel="stylesheet" href="src/styles.css">
  <link href="src/output.css" rel="stylesheet">
</head>
<body class="bg-white dark:bg-gray-900 transition-colors duration-200">
  <div class="popup-root">
    <!-- Header -->
    <div class="bg-gradient-to-r from-blue-500 to-indigo-600 dark:from-blue-700 dark:to-indigo-800 p-6 shadow-lg">
      <div class="flex justify-between items-center">
        <h1 class="text-2xl font-bold text-white">Booklet</h1>
        <!-- Dark Mode Toggle -->
        <button id="themeToggle" class="bg-white dark:bg-gray-800 p-2 rounded-lg shadow-md hover:scale-110 transition-transform">
          <svg id="sunIcon" class="w-6 h-6 text-yellow-500 hidden" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path>
          </svg>
          <svg id="moonIcon" class="w-6 h-6 text-gray-700 dark:text-gray-200" fill="currentColor" viewBox="0 0 20 20">
            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Tabs -->
    <div class="border-b border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900">
      <nav class="flex -mb-px">
        <button class="tab-btn flex-1 py-4 px-1 text-center border-b-2 font-medium text-sm transition-colors active" data-tab="subjects-tab">
          <span class="text-blue-600 dark:text-blue-400">Settings</span>
        </button>
        <button class="tab-btn flex-1 py-4 px-1 text-center border-b-2 font-medium text-sm transition-colors" data-tab="past-papers-tab">
          <span class="text-gray-500 dark:text-gray-400">Past Papers</span>
        </button>
        <button class="tab-btn flex-1 py-4 px-1 text-center border-b-2 font-medium text-sm transition-colors" data-tab="bookmarks-tab">
          <span class="text-gray-500 dark:text-gray-400">Bookmarks</span>
        </button>
      </nav>
    </div>

    <!-- Tab Content -->
    <div class="p-6">
      <!-- Subjects Tab -->
        <div id="subjects-tab" class="tab-content">
            <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100">Subjects</h2>
            <form id="subj_form">
            <div class="p-4 bg-gray-50 dark:bg-gray-800 rounded-lg mb-4 scrollable-subjects">
                <div id="subj_choices" class="grid grid-cols-2">
                <!-- Checkboxes will be inserted here -->
                </div>
            </div>
            <button type="submit" id="save_subj" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-md transition-colors font-medium w-full text-sm">
                Save Preferences
            </button>
            </form>
            <p class="text-gray-500 text-sm pt-2"><b>NOTE:</b> you can change these settings any time</p>
        </div>

        
    
      <!-- Past Papers Tab -->
      <div id="past-papers-tab" class="tab-content hidden">
        <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100">Past Papers</h2>

        <!-- Give the form an id and keep all submit buttons inside it -->
        <form id="papers_form" autocomplete="off">
        <div class="grid grid-cols-2 gap-6 mb-6">
        <!-- Left Column - Dropdowns -->
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Subjects</label>
            <select id="exam_subj" class=" h-10 w-full px-2 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
              <option selected disabled>Choose...</option>
              <!-- Options will be dynamically populated -->
            </select>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Series</label>
            <select id="exam_series" class=" h-10 w-full px-2 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option selected disabled>Choose...</option>
                <option value="fm">February/March</option>
                <option value="mj">May/June</option>
                <option value="on">October/November</option>
            </select>
          </div>
        </div>

        <!-- Right Column - Text Inputs -->
        <div class="space-y-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Year</label>
            <input type="text" id="exam_year" placeholder="e.g. 2025" autocomplete="off" min="2000" max="2100" required class="w-full px-2 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 placeholder-gray-300 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 h-10" >
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Paper</label>
            <input type="text" id="exam_paper" placeholder="e.g. 12" autocomplete="off" required class="w-full px-2 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 placeholder-gray-300 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 h-10">
          </div>
        </div>
        </div>

        <!-- Buttons -->
        <div class="grid grid-cols-4 gap-3">
          <div class="relative group">
            <button id="dropdownBtn" type="button" class="w-full bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 text-white px-6 py-2 rounded-md transition-colors font-medium flex items-center justify-center gap-2">
                <span id="dropdownBtnText">QP</span>
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                </svg>
            </button>
            
            <div id="dropdownMenu" class="
                absolute top-full left-0 mt-2
                w-full bg-white dark:bg-gray-700 
                border border-gray-200 dark:border-gray-600 rounded-md shadow-lg z-10
                
                transition-all duration-300 ease-out 
                opacity-0 invisible scale-95 transform 
                
                group-focus-within:opacity-100 
                group-focus-within:visible 
                group-focus-within:scale-100
            ">
                <button type="submit" value="qp" class="dropdown-option w-full text-left px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-t-md transition-colors" data-value="pdf">
                    Open
                </button>
                <button type="submit" value="bk" class="dropdown-option w-full text-left px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-b-md transition-colors" data-value="csv">
                    Booklet
                </button>
                <button type="submit" value="bm" class="dropdown-option w-full text-left px-2 py-1 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600 rounded-b-md transition-colors" data-value="csv">
                    Bookmark
                </button>
            </div>
          </div>

          <!-- Keep these inside the same form -->
          <button id="ms_button" value="ms" type="submit" class="bg-indigo-500 hover:bg-indigo-600 dark:bg-indigo-600 dark:hover:bg-indigo-700 text-white px-6 py-2 rounded-md transition-colors font-medium">
            MS
          </button>

          <button id="gt_button" value="gt" type="submit" class="bg-purple-500 hover:bg-purple-600 dark:bg-purple-600 dark:hover:bg-purple-700 text-white px-6 py-2 rounded-md transition-colors font-medium">
            GT
          </button>

          <button id="yt_button" value="yt" type="submit" class="bg-red-500 hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700 text-white px-6 py-2 rounded-md transition-colors font-medium">
            YT
          </button>
        </div>
        </form>
      </div>

      <!-- About Tab -->
      <div id="bookmarks-tab" class="tab-content hidden">
        <h2 class="text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100">Bookmarked Papers</h2>
        <div class="overflow-x-auto">
          <table class="w-full border-collapse border border-gray-300">
            <thead>
              <tr class="bg-gray-100 dark:bg-gray-700">
                <th class="text-sm border border-gray-300 dark:border-gray-600 px-4 py-2 text-left font-semibold text-gray-800 dark:text-gray-100">Subject</th>
                <th class="text-sm border border-gray-300 dark:border-gray-600 px-4 py-2 text-left font-semibold text-gray-800 dark:text-gray-100">Paper</th>
                <th class="text-sm border border-gray-300 dark:border-gray-600 px-4 py-2 text-center font-semibold text-gray-800 dark:text-gray-100">Actions</th>
              </tr>
            </thead>
            <tbody id="tableBody">
              <!-- Table will be populated dynamically -->
            </tbody>
          </table>
        </div>
        <br>
        <h2 class="text-xl font-semibold mb-1 text-gray-800 dark:text-gray-100">Other stuff</h2>
        <h3 class="text-sm text-gray-800 dark:text-gray-100"><a href="https://www.cambridgeinternational.org/Images/417318-list-of-formulae-and-statistical-tables.pdf" target="_blank" class="underline text-blue-400 hover:text-blue-500">MF19</a> (For AS/A Math & Further Math)</h3>
      </div>

    </div>

    <!-- footer -->
    <div class="bg-gray-200 dark:bg-gray-800 p-2 flex flex-col items-center justify-center border-t border-gray-200 dark:border-gray-700">
      <a href="https://github.com/AFSC54438/Booklet.git" target="_blank">
        <div class="p-1">
        <svg xmlns="http://www.w3.org/2000/svg" class="fill-blue-500 hover:fill-blue-600" height="20" width="19.375" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
        </div>
      </a>
      <div>
        <h2 class="text-xs text-gray-600 dark:text-gray-400">~ Designed by <a href="https://github.com/AFSC54438" target="_blank" class="underline text-blue-400 hover:text-blue-500">AFS</a> & <a href="https://github.com/YakAliOen" target="_blank" class="underline text-blue-400 hover:text-blue-500">YAO</a> ~</h2>
      </div>
    </div>
  </div>
  <script src="main.js"></script>
  <script src="pdf-lib.min.js"></script>
</body>
</html>
